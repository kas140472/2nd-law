<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2nd law</title>
    <link rel="stylesheet" href="sins/MOMstyle.css" />
    <script src='sins/jquery.min.js'></script>
    <script src='sins/jquery-ui.min.js'></script>
    <script type="text/javascript" >

        var t1 =0;
        var t2 =0;
        var tf =0;
        var s1 =0;
        var s2 =0;
        var Suniv =0;
        var flag=true;
        var step=0;

        function dummy() {

            window.requestAnimFrame = (function(){
                return window.requestAnimationFrame     ||
                    window.webkitRequestAnimationFrame  ||
                    window.mozRequestAnimationFrame     ||
                    window.oRequestAnimationFrame       ||
                    window.msRequestAnimationFrame      ||
                    function( callback ) {
                        window.setTimeout(callback, 1000 / 60);
                    };
            })();

            var canvas = document.getElementById('simscreen'),
                ctx = canvas.getContext('2d'),
                crankCaseColor = '#9EA18C',
                pistonColor = '#87CEEB',
                //test='#f4eeff',
                left_wall_x=100,
                left_wall_y_start=70,
                left_wall_y_end=220,
                right_wall_x=450,
                right_wall_y_start=70,
                right_wall_y_end=220,
                //piston_width=right_wall_x-right_wall_x,
                //piston_height = 0,
                //piston_x=100,
                //piston_y=250,


                cylinder = {
                    draw : function () {

                        ctx.strokeStyle = crankCaseColor;
                        ctx.fillStyle = crankCaseColor;
                        ctx.lineWidth = 10;

                        // left cylinder wall

                        ctx.beginPath();
                        ctx.moveTo(left_wall_x,left_wall_y_start);
                        ctx.lineTo(left_wall_x,left_wall_y_end);
                        ctx.stroke();

                        // right cylinder wall

                        ctx.beginPath();
                        ctx.moveTo(right_wall_x,right_wall_y_start);
                        ctx.lineTo(right_wall_x,right_wall_y_end);
                        ctx.stroke();

                        // bottom cylinder wall

                        ctx.beginPath();
                        ctx.moveTo(left_wall_x,left_wall_y_end);
                        ctx.lineTo(right_wall_x,right_wall_y_end);
                        ctx.stroke();

                        // top cylinder wall

                        ctx.beginPath();
                        ctx.moveTo(left_wall_x,left_wall_y_start);
                        ctx.lineTo(right_wall_x,right_wall_y_start);
                        ctx.stroke();

                        /*// piston

                        ctx.beginPath();
                        ctx.fillStyle = pistonColor;
                        ctx.fillRect(piston_x+2,piston_y+step,piston_width-4,piston_height);
                        ctx.stroke();*/

                        /* // cavity
                         ctx.beginPath();
                         ctx.fillRect(piston_x+2,piston_y+piston_height+step,piston_width-4,87-step);
                         ctx.stroke(); */

                        /*// connecting rod vertical-2

                        ctx.beginPath();
                        ctx.strokeStyle =crankCaseColor;
                        ctx.fillStyle = crankCaseColor;
                        ctx.lineWidth = 17;
                        ctx.moveTo((9.25*(right_wall_x + left_wall_x))/16,220);
                        ctx.lineTo((9.25*(right_wall_x + left_wall_x))/16,220-70);
                        ctx.stroke();

                        // connecting rod vertical-1

                        ctx.beginPath();
                        ctx.strokeStyle = crankCaseColor;
                        ctx.fillStyle = crankCaseColor;
                        ctx.lineWidth = 17;
                        ctx.moveTo((6.75*(right_wall_x + left_wall_x))/16,left_wall_y_start);
                        ctx.lineTo((6.75*(right_wall_x + left_wall_x))/16,155);
                        ctx.stroke();*/

                        // connecting rod - middle-vertical

                        ctx.beginPath();
                        ctx.strokeStyle = pistonColor;
                        ctx.fillStyle = pistonColor;
                        ctx.lineWidth = 10;
                        ctx.moveTo((right_wall_x + left_wall_x)/2,left_wall_y_start);
                        ctx.lineTo((right_wall_x + left_wall_x)/2,left_wall_y_end);
                        ctx.stroke();

                        // connecting rod - middle-horizontal

                        /*ctx.beginPath();
                        ctx.strokeStyle = pistonColor;
                        ctx.fillStyle = pistonColor;
                        ctx.lineWidth = 35;
                        ctx.moveTo((6.75*(right_wall_x + left_wall_x))/16 +15,step+110);
                        ctx.lineTo((9.25*(right_wall_x + left_wall_x))/16 -15,step+110);
                        ctx.stroke();

                        // connecting rod horizontal-1

                        ctx.beginPath();
                        ctx.strokeStyle = crankCaseColor;
                        ctx.fillStyle = crankCaseColor;
                        ctx.lineWidth = 17;
                        ctx.moveTo((6.75*(right_wall_x + left_wall_x))/16,155);
                        ctx.lineTo((6.75*(right_wall_x + left_wall_x))/16 + 15,155);
                        ctx.stroke();

                        // connecting rod horizontal-2

                        ctx.beginPath();
                        ctx.strokeStyle = crankCaseColor;
                        ctx.fillStyle = crankCaseColor;
                        ctx.lineWidth = 17;
                        ctx.moveTo((9.25*(right_wall_x + left_wall_x))/16 -15,220-70);
                        ctx.lineTo((9.25*(right_wall_x + left_wall_x))/16,220-70);
                        ctx.stroke();*/

                        //var image = document.getElementById('graph');

                        // graph y-axis

                        /*ctx.beginPath();
                        ctx.strokeStyle = '#17202A';
                        ctx.fillStyle = '#17202A';
                        ctx.lineWidth = 1;
                        ctx.moveTo((9.25*(right_wall_x + left_wall_x))/16-80,left_wall_y_end +20);
                        ctx.lineTo((9.25*(right_wall_x + left_wall_x))/16-80,left_wall_y_end+20+120);
                        ctx.stroke();

                        // graph x-axis

                        ctx.beginPath();
                        ctx.strokeStyle = '#17202A';
                        ctx.fillStyle = '#17202A';
                        ctx.lineWidth = 1;
                        ctx.moveTo((9.25*(right_wall_x + left_wall_x))/16-80,left_wall_y_end +20+120);
                        ctx.lineTo((9.25*(right_wall_x + left_wall_x))/16-80+120,left_wall_y_end+20+120);
                        ctx.stroke();*/

                        /*// graph liquid

                        ctx.beginPath();
                        ctx.fillStyle = '#1B4F72';
                        ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+20,left_wall_y_end +120,28,200);
                        ctx.stroke();*/

                        // graph vapor

                        /*ctx.beginPath();
                        ctx.fillStyle = '#5D6D7E ';
                        /*if(x==.9468)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +120,28,200);
                        else if(x==0.94420)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +126,28,200);
                        else if(x==0.94150)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +131,28,200);
                        else if(x==0.97138)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +75,28,200);
                        else if(x==0.96935)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +76,28,200);
                        else if(x==0.96720)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +80,28,200);
                        else if(x==0.99590)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +25,28,200);
                        else if(x==0.99440)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +28.5,28,200);
                        else if(x==0.99290)
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +31,28,200);
                        else
                            ctx.fillRect((9.25*(right_wall_x + left_wall_x))/16-80+30,left_wall_y_end +17,28,200);
                        ctx.stroke();*/

                        if(flag === false){

                            //work=/*(Math.round(step)*)*/p2;
                            /*energy=parseInt(heat)-parseInt(work);*/

                            document.getElementById("p1").innerHTML="Initial temp of system1 (T1) : "+t1+" °C";
                            document.getElementById("p2").innerHTML="Initial temp of system2 (T2) : "+t2+" °C";
                            document.getElementById("p3").innerHTML="Final temp of mixed fluid : "+tf+" °C";
                            document.getElementById("p4").innerHTML="▲S1 : "+s1.toFixed(5)+" kJ/kgK";
                            document.getElementById("p5").innerHTML="▲S2 : "+s2.toFixed(5)+" kJ/kgK";
                            document.getElementById("p6").innerHTML="▲Suniverse : "+Suniv.toFixed(5)+" kJ/kgK";}

                        /*}
                        else{

                        }*/

                        else{
                            step=0;
                        }
                    }
                };

            (function animloop(){
                requestAnimFrame(animloop);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                cylinder.draw();
            })();

        }

        function simstate() {

            var left=Math.random()*50;
            var move_ball = function () {

                left=left+20;
                document.getElementById('ball').style.left=left+'px';
                if(left< Math.random()*200)
                {
                    setTimeout(move_ball,100);
                }

            }
            move_ball();

            if (flag===true){
                document.getElementById('playpausebutton').src="sins/bluepausedull.png";
                flag=false;

                $('#l1spinner').spinner("disable");
                $('#l2spinner').spinner("disable");
                //$('#l3spinner').spinner("disable");
                //$('#l4spinner').spinner("disable");

                $('#l1slider').slider("disable");
                $('#l2slider').slider("disable");
                //$('#l3slider').slider("disable");
                //$('#l4slider').slider("disable");

                /* if (work===0){
                     if(heat===0){
                         document.getElementById("p6").innerHTML="It is an isolated System";
                     }
                     // else{
                     // document.getElementById("p6").innerHTML="The process is Isochoric";
                     // }
                 }
                 else if (energy===0){
                     document.getElementById("p6").innerHTML="The process is Isothermal";
                 }
                 else if(heat===0){
                     document.getElementById("p6").innerHTML="The process is adiabatic";
                 } */

            }

            else {
                document.getElementById('playpausebutton').src="sins/blueplaydull.png";
                flag=true;

                $('#l1spinner').spinner("enable");
                $('#l2spinner').spinner("enable");
                //$('#l3spinner').spinner("enable");
                //$('#l4spinner').spinner("enable");

                $('#l1slider').slider("enable");
                $('#l2slider').slider("enable");
                //$('#l3slider').slider("enable");
                //$('#l4slider').slider("enable");

                //document.getElementById("p6").innerHTML="";

            }
        }


        function tf_val(){

            //rodtravel=input;
            tf=(t1+t2)/2;
            document.getElementById("p3").innerHTML="Final temp of mixed fluid : "+0+" °C";
        }

        function t1_val(input){

            t1=input;
            document.getElementById("p1").innerHTML="Initial temp of system1 (T1) : "+0+" °C";

        }

        function t2_val(input){

            t2=input;
            document.getElementById("p2").innerHTML="Initial temp of system2 (T2) : "+0+" °C";

        }

        function s1_val(){
            //energy=0;
            /*if(t2==100 && p2==0.01)
            {energy=2687.50;}
            if(t2==100 && p2==0.05)
            {energy=2682.40;}
            if(t2==100 && p2==0.09)
            {energy=2677.12;}
            if(t2==125 && p2==0.01)
            {energy=2735.25;}
            if(t2==125 && p2==0.05)
            {energy=2731.30;}
            if(t2==125 && p2==0.09)
            {energy=2727.22;}
            if(t2==150 && p2==0.01)
            {energy=2783.00;}
            if(t2==150 && p2==0.05)
            {energy=2780.20;}
            if(t2==150 && p2==0.09)
            {energy=2777.32;}*/
            s1=Math.log((tf+273)/(t1+273));
            document.getElementById("p4").innerHTML="Entropy change in system1 : "+0+" kJ/kgK";

        }
        function s2_val(){
            //energy=0;
            /*if(t2==100 && p2==0.01)
            {energy=2687.50;}
            if(t2==100 && p2==0.05)
            {energy=2682.40;}
            if(t2==100 && p2==0.09)
            {energy=2677.12;}
            if(t2==125 && p2==0.01)
            {energy=2735.25;}
            if(t2==125 && p2==0.05)
            {energy=2731.30;}
            if(t2==125 && p2==0.09)
            {energy=2727.22;}
            if(t2==150 && p2==0.01)
            {energy=2783.00;}
            if(t2==150 && p2==0.05)
            {energy=2780.20;}
            if(t2==150 && p2==0.09)
            {energy=2777.32;}*/
            s2=Math.log((tf+273)/(t2+273));
            document.getElementById("p5").innerHTML="Entropy change in system2 : "+0+" kJ/kgK";

        }

        function Suniv_val(){

            //work=parseInt(force*rodtravel);
            /*if(t2==100 && p2==0.01)
            {x=0.94680;}
            if(t2==100 && p2==0.05)
            {x=0.94420;}
            if(t2==100 && p2==0.09)
            {x=0.94150;}
            if(t2==125 && p2==0.01)
            {x=0.97138;}
            if(t2==125 && p2==0.05)
            {x=0.96935;}
            if(t2==125 && p2==0.09)
            {x=0.96720;}
            if(t2==150 && p2==0.01)
            {x=0.99590;}
            if(t2==150 && p2==0.05)
            {x=0.99440;}
            if(t2==150 && p2==0.09)
            {x=0.99290;}*/
            Suniv=s1 + s2;
            document.getElementById("p6").innerHTML="Entropy change of universe : "+0+" kJ/kgK";

        }

        /* function randomise(){

            let rand_distance = Math.floor(Math.random() * 81) - 40;
            let rand_heat=Math.floor(Math.random() * 81) - 40;
            let rand_force=Math.floor(Math.random() * 81) - 40;
            if(energy === rand_heat - rand_distance*rand_force){

                console.log(energy,rand_heat,rand_distance,rand_force);
                heat=rand_heat;
                rodtravel=rand_distance;
                force=rand_force;

                $('#l1spinner').spinner("value",rodtravel);
                $('#l1slider').slider("value",rodtravel);

                $('#l2spinner').spinner("value",force);
                $('#l2slider').slider("value",force);

                $('#l3spinner').spinner("value",heat);
                $('#l3slider').slider("value",heat);

                p1_val(rodtravel);
                p2_val(force);
                t2_val(heat);
                x_val();

            }
            else{
                randomise();
            }
        }*/

        function varinit()
        {

            varchange();

            //Variable r1 slider and number input types

            $('#l1slider').slider("value", 273);
            $('#l1spinner').spinner("value", 273);
            $('#l2slider').slider("value", 273);
            $('#l2spinner').spinner("value", 273);
            /*$('#l3slider').slider("value", 0);
            $('#l3spinner').spinner("value", 0);
            $('#l4slider').slider("value", 0);
            $('#l4spinner').spinner("value", 0);*/

            t1_val(273);
            t2_val(273);
            tf_val();
            s1_val();
            s2_val();
            Suniv_val();

        }

        function varchange()
        {

            // Variable r1 slider and number input types

            $('#l1slider').slider({ max : 373, min : 273, step : 5 });		    // slider initialisation : jQuery widget
            $('#l1spinner').spinner({ max : 373, min : 273, step : 5 });		    // number initialisation : jQuery widget
            $('#l2slider').slider({ max : 373, min : 273, step : 5 });		    // slider initialisation : jQuery widget
            $('#l2spinner').spinner({ max : 373, min : 273, step : 5 });		    // number initialisation : jQuery widget

            // monitoring change in value and connecting slider and number
            // monitoring change in value and connecting slider and number
            // setting trace point coordinate arrays to empty on change of link length

            // travel

            $( "#l1slider" ).on(  "slide",  function( e, ui ) {
                $('#l1spinner').spinner("value",ui.value);
                t1_val(ui.value);
                tf_val();
                s1_val();
                s2_val();
                Suniv_val();
            });

            $( "#l1spinner" ).on( "spin",   function( e, ui ) {
                $('#l1slider').slider("value",ui.value);
                t1_val(ui.value);
                tf_val();
                s1_val();
                s2_val();
                Suniv_val();
            });

            $( "#l1spinner" ).on( "change", function() {
                varchange() } );

            // force

            $( "#l2slider" ).on(  "slide",  function( e, ui ) {
                $('#l2spinner').spinner("value",ui.value);
                t2_val(ui.value);
                tf_val();
                s1_val();
                s2_val();
                Suniv_val();
            });

            $( "#l2spinner" ).on( "spin",   function( e, ui ) {
                $('#l2slider').slider("value",ui.value);
                t2_val(ui.value);
                tf_val();
                s1_val();
                s2_val();
                Suniv_val();
            });

            $( "#l2spinner" ).on( "change", function() {
                varchange() } );

            // heat

            /*$( "#l3slider" ).on(  "slide",  function( e, ui ) {
                $('#l3spinner').spinner("value",ui.value);
                t2_val(ui.value);
                $('#l4spinner').spinner("value",heat-work);
                $('#l4slider').slider("value",heat-work);
                enthalpy2_val(heat-work);
                enthalpy1_val(heat-work);
            });*/

            /*$( "#l3spinner" ).on( "spin",   function( e, ui ) {
                $('#l3slider').slider("value",ui.value);
                t2_val(ui.value);
                $('#l4spinner').spinner("value",heat-work);
                $('#l4slider').slider("value",heat-work);
                enthalpy2_val(heat-work);
                enthalpy1_val(heat-work);
            });

            $( "#l3spinner" ).on( "change", function() {
                varchange() } );

            // energy

            $( "#l4slider" ).on(  "slide",  function( e, ui ) {
                $('#l4spinner').spinner("value",ui.value);
                enthalpy2_val(ui.value);
                randomise();} );

            $( "#l4spinner" ).on( "spin",   function( e, ui ) {
                $('#l4slider').slider("value",ui.value);
                enthalpy2_val(ui.value);
                randomise();} );

            $( "#l4spinner" ).on( "change", function() {
                varchange();
                randomise();} );*/

            //$('#l4spinner').spinner("value")
            t1_val($('#l1spinner').spinner("value"));
            t2_val($('#l2spinner').spinner("value"));
            tf_val();
            s2_val(); //$('#l3spinner').spinner("value")
            s1_val();
            Suniv_val();

            varupdate();
        }

        function varupdate()
        {

            $('#l1slider').slider("value", $('#l1spinner').spinner('value'));  //updating slider location with change in spinner(debug)
            $('#l2slider').slider("value", $('#l2spinner').spinner('value'));  //updating slider location with change in spinner(debug)
            //$('#l3slider').slider("value", $('#l3spinner').spinner('value'));  //updating slider location with change in spinner(debug)
            //$('#l4slider').slider("value", $('#l4spinner').spinner('value'));  //updating slider location with change in spinner(debug)

        }

    </script>
</head>

<body onload="varinit();dummy();">

<!-- Defining Container for Simulation -->
<noscript>
    The simulation requires JavaScript to be enabled.
</noscript>
<div id="container">
    <!-- Replace TITLE with simulation title to be displayed next to logo-->
    <div id="simtitle">Principle of increase of entropy</div>
    <!-- Region for simulation display -->
    <canvas id="simscreen" height="400px" width="550px"></canvas>
    <div id="titleincanvas"></div>
    <!-- Region for comment / question prompts -->
    <div id="commentboxleft">
        <p id="p1" style="line-height:0.3"></p>
        <p id="p2" style="line-height:0.3"></p>
        <p id="p3" style="line-height:0.3"></p>
    </div>
    <div id="commentboxright">
        <p id="p4" style="line-height:0.3"></p>
        <p id="p5" style="line-height:0.3"></p>
        <p id="p6" style="line-height:0.3"></p>
    </div>

    <!-- DND-Title of region for variables display -->
    <div id="vartitle">VARIABLES</div>

    <!-- Region for Input parameters of simulation -->
    <div id="variables">
        <div class="variable">
            <div class="varname"><p title="Link Length" style="font-size:65%;">Temperature, T1 (°C)</p>
                <br>
                <input id="l1spinner"></div>
            <br>
            <div id="l1slider"></div>
            <br>
            <div class="varname"><p title="Link Length" style="font-size:65%;">Temperature, T2 (°C)</p>
                <br>
                <input id="l2spinner"></div>
            <br>
            <div id="l2slider"></div>
        </div>
    </div>
    <!--<img class="graph"  src="graph0.4.png" width="150px" height="150px"  alt="graph" id="graph"/>
    <img class="state2"  src="throttling_img1.png" width="80px" height="30px"  alt="state2" id="state2"/>
    <img class="state1"  src="throttling_img2.png" width="80px" height="12px"  alt="state1" id="state1"/>
    <img class="state11"  src="throttling_img11.png" width="40px" height="8px"  alt="state11" id="state11"/>
    <img class="state22"  src="throttling_img22.png" width="40px" height="7px"  alt="state22" id="state22"/>
    <img class="state3"  src="throttling_img3.png" width="80px" height="23px"  alt="state3" id="state3"/>-->
    <img src="ball.jpg" id="ball">
    <!-- DND-Title of region for controls display -->
    <div id="ctrltitle">CONTROLS</div>
    <!-- Region for User controls of simulation -->
    <div id="controls">
        <img id="playpausebutton" onclick="simstate();" src="sins/blueplaydull.png" />
        <img id="rotationbutton" onclick="location.reload();" src="sins/bluecwdull.png" />
    </div>
    <!-- DND-Copyright display-->
    <div id="copyright" title="Developer : SOLVEr"> Copyright &copy; SOLVE The Virtual Lab @ NITK Surathkal </div>

</div><!-- Container div close -->
</body>
</html>
